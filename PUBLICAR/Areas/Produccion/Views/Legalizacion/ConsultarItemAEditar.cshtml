@{
    ViewBag.Title = "Editar item de la legalización";
}

<input id="IdLegalizacion" hidden value="@ViewBag.IdLegalizacion" />
<input id="IdAnticipo" hidden value="@ViewBag.IdAnticipo" />

@if (Sesion.HasPermission("PRO-LEGALIZACION_CREAR"))
{
    <div class="pull-right">
        <a href="@Url.Action("CrearItem", "Legalizacion", new {Area = "Produccion", legalizacionId = @ViewBag.IdLegalizacion, anticipoId = @ViewBag.IdAnticipo })" class="btn btn-primary" data-toggle="modal" data-size="all" data-execute-onload="LegalizacionCrearItem.OnLoadLegalizacion" data-target="#">Agregar item</a>
    </div>
}

<div class="col-md-12">
    <h2>Items de la legalización # @ViewBag.IdLegalizacion</h2>
    <table id="tabla_item_legalizacion_detalle" class="table table-striped table-bordered compact text-center" cellpadding="0" width="100%">
        <thead>
            <tr>
                <th class="text-center">#</th>
                <th class="text-center">Número de factura</th>
                <th class="text-center">Concepto</th>
                <th class="text-center">Fecha de factura</th>
                <th class="text-center">NIT</th>
                <th class="text-center">Beneficiario</th>
                <th class="text-center">Dirección</th>
                <th class="text-center">Teléfono</th>
                <th class="text-center">Ciudad</th>
                <th class="text-center">Valor</th>
                <th class="text-center">Impuestos</th>
                <th class="text-center">Total</th>
                <th class="text-center">Eliminar</th>
                <th class="text-center">Editar</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>


@Styles.Render("~/bundles/dataTables.css")
@section Scripts{
    @Scripts.Render("~/bundles/dataTables.js")
    <script type="text/javascript">
            var PERMISO_CAMBIAR_ESTADO_LEGALIZACION = ("@Sesion.HasPermission("PRO-LEGALIZACION_CANCELAR")" === "True");
            var URL_CAMBIAR_ESTADO_LEGALIZACION = "@Url.Action("Cancelar", "Legalizacion", new { Area = "Produccion" })";
            /**
             * Edicion de los item de la legalización
             */
            var URL_CONSULTAR_ITEMS_EDITAR_LEGALIZACION = "@Url.Action("ConsultarItemAEditar", "Legalizacion", new { Area = "Produccion" })";
            var URL_EDITAR_LEGALIZACION = "@Url.Action("Editar", "Legalizacion", new { Area = "Produccion" })";
    </script>
    @Scripts.Render("~/Areas/Produccion/scripts/Legalizacion/Editar.js")
    @Scripts.Render("~/Areas/Produccion/scripts/Legalizacion/CrearItem.js") 
}

