@model CopiarPresupuestoViewModel
@{
    ViewBag.Title = "Copiar Items Ppto";
}

<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h4 class="modal-title">@ViewBag.Title</h4>
</div>

<div class="modal-body">
    @using (Ajax.BeginForm("CopiarPresupuesto", "Presupuesto", new { Area = "Produccion" },
        new AjaxOptions { HttpMethod = "POST", OnBegin = "ValidarPresupuestoSeleccionado", OnSuccess = "CerraPresupuesto" },
        new { @class = "", role = "form" }))

    {
        @Html.AntiForgeryToken()

        <div class="clearfix"></div>
        @Html.ValidationMessage("Error", new { @class = "text-danger" })
        @Html.ValidationMessage("Success", new { @class = "text-success" })
        @Html.ValidationSummary(false, "", new { @class = "alert alert-danger small col-md-12" })
        <div class="clearfix"></div>

        @Html.HiddenFor(m => m.EmpresaId)
        @Html.HiddenFor(m => m.VersionCopiadaId)
        @Html.HiddenFor(m => m.PresupuestoVersionId)
        @Html.HiddenFor(m => m.CopiaVersionInterna)
        @Html.HiddenFor(m => m.CopiaVersionExterna)

        <div class="form-group">
            <div class="col-md-3 padding-left-0">
                <label class="control-label">Empresa</label>
                <input type="text" class="form-control" id="NombreEmpresaCopiar" readonly />
            </div>
        </div>
        <!---->
        <div class="clearfix"></div>

        <div class="form-group">
            <div class="form-group">
                <div class="col-md-3 padding-left-0">
                    @Html.LabelFor(m => m.Filtro, new { @class = "control-label" })
                    @Html.DropDownListFor(m => m.Filtro,
                   Model.ListaFiltro,
                   "Seleccione",
                   new
                   {
                       @class = "form-control selectpicker",
                       data_live_search = "true",
                       onchange = "OnchangeTipoBusqueda(this)"
                   })
                    @Html.ValidationMessageFor(m => m.Filtro, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group hidden" id="numeroPresupuestoFiltro">
                <div class="col-md-6 padding-left-0">
                    <label class="control-label">Ingrese un número de presupuesto:</label>
                    <input type="number" id="numeroPresupuesto" class="form-control" />
                </div>
            </div>
            <div class="form-group ocultar">
                <div class="col-md-4 padding-left-0">
                    @Html.LabelFor(m => m.ClienteId, new { @class = "control-label" })
                    @Html.DropDownListFor(m => m.ClienteId, Model.ListaClientes,
                     "Seleccione",
                     new
                     {
                         @class = "form-control selectpicker",
                         data_live_search = "true",
                         onchange = "OnchangeOrdenTrabajo(this, '" + Url.Action("ListaOpcionesPorCliente", "OrdenTrabajo", new { Area = "Trafico" }) + "');"
                     })
                    @Html.ValidationMessageFor(m => m.ClienteId, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group ocultar">
                <div class="col-md-4 padding-left-0">
                    @Html.LabelFor(m => m.OrdenTrabajoId, new { @class = "control-label" })
                    @Html.DropDownListFor(m => m.OrdenTrabajoId, new List<SelectListItem>(),
                        "Seleccione",
                        new
                        {
                            @class = "form-control selectpicker",
                            data_live_search = "true",
                        })
                    @Html.ValidationMessageFor(m => m.OrdenTrabajoId, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="text-right">
                <a class="btn btn-warning" onclick="CrearTablaPresupuestos()"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></a>
            </div>
        </div>
        <!---->
        <div class="clearfix"></div>
        <p>* Recuerde que solo se pueden copiar los Presupuestos de la Empresa sobre la cual se creó éste Presupuesto.</p>
        <!---->
        <div class="clearfix"></div>

            <!--Tabla-->
        <div class="row">
            <div class="col-md-12 hide" id="tabla-oculta">
                <table id="tabla-presupuestos" class="table table-striped table-bordered compact text-center" cellpadding="0" width="100%">
                    <thead>
                        <tr>
                            <th class="text-center"></th>
                            <th class="text-center"># Ppto int</th>
                            <th class="text-center"># Ppto ext</th>
                            <th class="text-center">Fecha</th>
                            <th class="text-center">Estado</th>
                            <th class="text-center">Referencia</th>
                            <th class="text-center">Producto</th>
                            <th class="text-center">OT</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="text-right">
            <button type="submit" class="btn btn-success">Generar Copia</button>
            <button type="button" class="btn btn-danger" data-dismiss="modal">Cancelar</button>
        </div>
    }
</div>
