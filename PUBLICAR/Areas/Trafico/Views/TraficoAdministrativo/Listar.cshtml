@{
    ViewBag.Title = "Solicitudes Administrativas";
}

<div class="pull-right">
    @if (Sesion.HasPermission("TRA-TRAFICO_ADMINISTRATIVO_SOLICITUD_ADMINISTRATIVA_CREAR"))
    {
        <button class="btn btn-secondary" onclick="AbrirModalCrear()">Nueva Solicitud</button>
    }
</div>

<div class="clearfix"></div>
<!--Filtro de la tabla-->

<div class="panel panel-default">
    <div class="panel-body">
        <form class="form-inline">
            <div class="col-md-3">
                <div class="form-group">
                    <label for="texto">Estado:</label>
                    <select id="TipoCierreId" class="form-control">
                        <option value="1" selected>En Progreso </option>
                        <option value="2">Finalizadas</option>
                        <option value="3">Canceladas</option>
                        <option value="4">Todas</option>
                    </select>
                </div>
            </div>

            <div class="col-md-4">
                <div class="form-group">
                    <label for="texto">Ingrese el texto:</label>
                    <input type="text" class="form-control" id="texto">
                </div>
            </div>

            <div class="col-md-2">
                <div class="pull-left">
                    <div class="form-group">
                        <div class="select-style">
                            <label for="texto"> </label>
                            <input type="button" class="btn btn-trafico" onclick="TablaSolicitudes()" value="Buscar" />
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading">Mis Solicitudes Creadas</div>
    <div class="panel-body">
        <div class="row">
            <table width="100%">
                <tbody>
                    <tr>
                        <td width="10%" align="right">
                            <div style="height:18px;width:18px;background-color:#9bd39b;border:3px solid #9bd39b;border-radius:0.3em;-moz-border-radius:0.3em;-webkit-border-radius:0.3em;"></div>
                        </td>
                        <td width="15%" align="left">&nbsp;&nbsp;<b> EN PROGRESO</b></td>
                        <td width="10%" align="right">
                            <div style="height:18px;width:18px;background-color:#bfbfbf;border:3px solid #bfbfbf;border-radius:0.3em;-moz-border-radius:0.3em;-webkit-border-radius:0.3em;"></div>
                        </td>
                        <td width="15%" align="left">&nbsp;&nbsp;<b> FINALIZADAS</b></td>
                        <td width="10%" align="right">
                            <div style="height:18px;width:18px;background-color:#e07370;border:3px solid #e07370;border-radius:0.3em;-moz-border-radius:0.3em;-webkit-border-radius:0.3em;"></div>
                        </td>
                        <td width="15%" align="left">&nbsp;&nbsp;<b> CANCELADAS</b></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="col-md-12">
    <table id="tabla_Solicitudes_hechas" class="table table-striped table-bordered compact text-center" cellpadding="0" width="100%">
        <thead>
            <tr>
                <th class="text-center">No</th>

                <th class="text-center">Tipo solicitud</th>
                <th class="text-center"># Solicitud</th>
                <th class="text-center">Título</th>
                <th class="text-center">Descripción</th>
                <th class="text-center">Usuario solicitó</th>
                <th class="text-center">Departamento</th>
                <th class="text-center">Fecha y hora creación</th>

                <th class="text-center">Responsables</th>
                <th class="text-center">Fecha propuesta respuesta</th>
                <th class="text-center">Estado</th>
                <th class="text-center">Activar/Cancelar</th>
                <th class="text-center">Mi Estado/respuestas</th>
                <th class="text-center">Estado Departamento</th>
                <th class="text-center">Finalizar</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

@Styles.Render("~/bundles/dataTables.css")
@section Scripts{
    @Scripts.Render("~/bundles/dataTables.js")

    <script type="text/javascript">
        var URL_CREAR_SOLICITUD = "@Url.Action("Crear", "TraficoAdministrativo", new { Area = "Trafico" })";
        var URL_LISTA_DIRECTORES = "@Url.Action("LitarDirectores", "TraficoAdministrativo", new { Area = "Trafico" })";
        var URL_TIPOS_REQUERIMIENTOS = "@Url.Action("ListarTiposRequerimientos", "TraficoAdministrativo", new { Area = "Trafico" })";
        var URL_SUBIR_ARCHIVOS_TEMP_INFOME_ENTREVISTA = "@Url.Action("UploadFile", "InformeEntrevista", new { Area = "Trafico"})";
        var URL_LISTAR_SOLICITUD = "@Url.Action("Listar", "TraficoAdministrativo", new { Area = "Trafico" })";
        var URL_AGREGAR_STATUS = "@Url.Action("CrearStatus", "TraficoAdministrativo", new { Area = "Trafico" })";
        var URL_HISTORIAL_STATUS = "@Url.Action("ListarHistoricoStatus", "TraficoAdministrativo", new { Area = "Trafico" })";
        var URL_LISTAR_HISTORICO = "@Url.Action("ListarHistoricoStatus", "TraficoAdministrativo", new { Area = "Trafico" })";
        var URL_CIERRE_SOLICITUD = "@Url.Action("CierreSolicitud", "TraficoAdministrativo", new { Area = "Trafico" })";
        var URL_CAMBIAR_ESTADO_SOLICITUD = "@Url.Action("CambiarEstado", "TraficoAdministrativo", new { Area = "Trafico" })";
        var PERMISO_TRA_TRAFICO_ADMINISTRATIVO_SOLICITUD_ADMINISTRATIVA_CREAR_STATUS = ("@Sesion.HasPermission("TRA-TRAFICO_ADMINISTRATIVO_SOLICITUD_ADMINISTRATIVA_CREAR_STATUS")" === "True");
        var PERMISO_TRA_TRAFICO_ADMINISTRATIVO_SOLICITUD_ADMINISTRATIVA_APROBAR = ("@Sesion.HasPermission("TRA-TRAFICO_ADMINISTRATIVO_SOLICITUD_ADMINISTRATIVA_APROBAR")" === "True");
        var PERMISO_TRA_TRAFICO_ADMINISTRATIVO_SOLICITUD_ADMINISTRATIVA_VER_STATUS = ("@Sesion.HasPermission("TRA-TRAFICO_ADMINISTRATIVO_SOLICITUD_ADMINISTRATIVA_VER_STATUS")" === "True");
    </script>
    @Scripts.Render("~/Areas/Trafico/scripts/TraficoAdministrativo/Listar.js")
    @Scripts.Render("~/Areas/Trafico/scripts/TraficoAdministrativo/Crear.js")
}
