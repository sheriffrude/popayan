@model BuscarPresupuestoViewModel
@{
    ViewBag.Title = "Busqueda de presupuestos";
}
<form id="form_buscar_presupuestos">
    <div class="form-group col-md-3">
        @Html.LabelFor(m => m.FiltroId, new { @class = "control-label" })
        @Html.DropDownListFor(m => m.FiltroId, Model.ListaTipoFiltro, "Seleccione",
    new
    {
        @class = "form-control selectpicker",
        onchange = "OnChangeFiltro(this)"
    })
        @Html.ValidationMessageFor(m => m.FiltroId, "", new { @class = "text-danger" })
    </div>

    <!--Content OT-->
    <div id="contenedor-filtro" hidden>
        <div class="form-group col-md-3">
            @Html.LabelFor(m => m.EmpresaId, new { @class = "control-label" })
            @Html.DropDownListFor(m => m.EmpresaId, Model.ListaEmpresas, "Seleccione",
        new
        {
            @class = "form-control selectpicker",
            onchange = "OnChangeEmpresa(this)"
        })
            @Html.ValidationMessageFor(m => m.EmpresaId, "", new { @class = "text-danger" })
        </div>
        <div class="form-group col-md-3">
            @Html.LabelFor(m => m.ClienteId, new { @class = "control-label" })
            @Html.DropDownListFor(m => m.ClienteId, new List<SelectListItem>(), "Seleccione",
        new
        {
            @class = "form-control selectpicker",
            onchange = "OnChangeCliente(this)"
        })
            @Html.ValidationMessageFor(m => m.ClienteId, "", new { @class = "text-danger" })
        </div>
        <div class="form-group col-md-3">
            @Html.LabelFor(m => m.OrdenTrabajoEstadoId, new { @class = "control-label" })
            @Html.DropDownListFor(m => m.OrdenTrabajoEstadoId, Model.ListaEstadoOrdenTrabajo, "Seleccione", new
   {
       @class = "form-control selectpicker",
       onchange = "OnChangeOrdenTrabajoEstado(this)"
   })
            @Html.ValidationMessageFor(m => m.OrdenTrabajoEstadoId, "", new { @class = "text-danger" })
        </div>

        <div class="form-group col-md-3">
            @Html.LabelFor(m => m.OrdenTrabajoId, new { @class = "control-label" })
            @Html.DropDownListFor(m => m.OrdenTrabajoId, new List<SelectListItem>(), "Seleccione", new { @class = "form-control selectpicker", data_live_search = "true" })
            @Html.ValidationMessageFor(m => m.OrdenTrabajoId, "", new { @class = "text-danger" })
        </div>
    </div>

    <!--Content Numero Presupuesto-->
    <div id="contenedor-numero-presupuesto" hidden>
        <div class="form-group col-md-3">
            @Html.LabelFor(m => m.PresupuestoId, new { @class = "control-label" })
            @Html.TextBoxFor(m => m.PresupuestoId, new { @class = "form-control" })
            @Html.ValidationMessageFor(m => m.PresupuestoId, "", new { @class = "text-danger" })
        </div>
    </div>

    <!--Content Estado Presupuesto-->
    <div id="lista-estado" hidden>
        <div class="form-group col-md-3">
            @Html.LabelFor(m => m.EstadoId, new { @class = "control-label" })
            @Html.DropDownListFor(m => m.EstadoId, Model.ListaPresuestoEstado, "Seleccione", new { @class = "form-control selectpicker", data_live_search = "true" })
            @Html.ValidationMessageFor(m => m.EstadoId, "", new { @class = "text-danger" })
        </div>
    </div>

    <!--Content tipo presupuesto-->
    <div id="lista-tipo" hidden>
        <div class="form-group col-md-3">
            @Html.LabelFor(m => m.TipoPresupuestoId, new { @class = "control-label" })
            @Html.DropDownListFor(m => m.TipoPresupuestoId, Model.ListaTipoPresupuesto, "Seleccione", new { @class = "form-control selectpicker", data_live_search = "true" })
            @Html.ValidationMessageFor(m => m.TipoPresupuestoId, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group col-md-3">
        <label class="control-label"></label>
        <div class="clearfix"></div>
        <button type="submit" class="btn btn-secondary">
            <span class="glyphicon glyphicon-search" aria-hidden="true"></span> Buscar
        </button>
    </div>

    <div class="clearfix"></div>
    <div class="ln_solid"></div>

    <div class="col-md-12" id="tabla-oculta" hidden>
        <table id="tabla-presupuestos" class="table table-striped table-bordered compact text-center" cellpadding="0" width="100%">
            <thead>
                <tr>
                    <th class="text-center"></th>
                    <th class="text-center"># Ppto</th>
                    <th class="text-center">Versión interna</th>
                    <th class="text-center">Versión externa</th>
                    <th class="text-center">Tipo Ppto</th>
                    <th class="text-center">Referencia Ppto</th>
                    <th class="text-center">Empresa</th>
                    <th class="text-center">Cliente</th>
                    <th class="text-center">Producto</th>
                    <th class="text-center">OT</th>
                    <th class="text-center">Estado del Ppto</th>
                    <th class="text-center">Valor del Ppto bruto</th>
                    <th class="text-center">Fecha de creación</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</form>

@Styles.Render("~/bundles/dataTables.css")
@section Scripts{
    @Scripts.Render("~/bundles/dataTables.js")

    <script type="text/javascript">
        var BUSCAR_PRESUPUESTO = "@Url.Action("Buscar", "BuscarPresupuesto", new { Area = "Produccion" })";

        var URL_CLIENTE_LISTAR_POR_EMPRESA = "@Url.Action("ListarOpcionesPorEmpresa", "UsuarioCliente", new { Area = "Gestion" })";
        var URL_ORDEN_TRABAJO_LISTAR = "@Url.Action("ListarOpcionesPorEmpresaClienteEstado", "OrdenTrabajo", new { Area = "Trafico" })";
        var URL_CONSULTAR_PRESUPUESTO = "@Url.Action("Consultar", "Presupuesto", new { Area = "Produccion" })";
    </script>

    @Scripts.Render("~/Areas/Produccion/scripts/BuscarPresupuesto/Listar.js")
}