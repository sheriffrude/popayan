@model ProcessPlusERP.Areas.Gestion.Models.PlanNegocio.ListarPlanNegocioViewModel
@{
    ViewBag.Title = "Planes de negocio";
}

@Html.HiddenFor(m => m.EmpresaId)

<div class="clearfix"></div>
<div class="ln_solid"></div>
<div class="col-md-12">
    <div class="pull-right">
        <a href="@Url.Action("GenerarPlan", "PlanNegocio", new { Area = "Gestion", empresaId = Model.EmpresaId })" class="btn btn-primary">Crear nuevo plan</a>
    </div><br />
</div>
<div class="col-md-12">

    <br /><br />

    <!--Plan de negocio-->
    <div id="plan-negocio" class="tab-pane fade in active">
        <div class="row">
            <div class="pull-left">
                <div class="form-inline text-center">
                    <div class="form-group">
                        @Html.DropDownListFor(m => m.UnidadNegocioId, Model.UnidadesNegocio, "Seleccione Unidad de negocio", new { @class = "form-control selectpicker", onchange = "listarPlan.cambiarUnidadNegocio(this)" })
                    </div>
                    <div class="form-group">
                        @Html.DropDownListFor(m => m.Anio, Model.Anios, "Seleccione Año", new { @class = "form-control selectpicker" })
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(m => m.MetaAnual, new { @class = "control-label" })
                        @Html.TextBoxFor(m => m.MetaAnual, new { @class = "form-control", placeholder = "Valor de la meta anual", disabled = true })
                        @Html.LabelFor(m => m.PromedioMensual, new { @class = "control-label" })
                        @Html.TextBoxFor(m => m.PromedioMensual, new { @class = "form-control", placeholder = "Acumulado mensual", disabled = true })
                    </div>

                    <div class="form-group">
                        <input type="button" class="btn btn-secondary" value="Buscar" onclick="listarPlan.buscarDetallePlan()" />
                    </div>

                    <div class="pull-right" >
                        <a href="#" class="btn btn-primary" id="btn-editar">Editar</a>
                    </div>
                </div>
            </div>
        </div>
        <!--Tabla-->
        <div class="row">
            <div class="col-md-12">
                <table id="tabla-plan" class="table table-striped table-bordered compact text-center" cellpadding="0" width="100%">
                    <thead>
                        <tr>
                            <th class="text-center"></th>
                            <th class="text-center">Mes</th>
                            <th class="text-center">Meta promedio</th>
                            <th class="text-center">Recurso</th>
                            <th class="text-center">Meta promedio / Recurso</th>
                            <th class="text-center">Meta estimada</th>
                            <th class="text-center">Meta estimada / Recurso</th>
                            <th class="text-center">Utilidad</th>
                            <th class="text-center">Utilidad / Recurso</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
</div>


@section Scripts{
    @Scripts.Render("~/bundles/dataTables.js")
    @Scripts.Render("~/Areas/Gestion/scripts/PlanNegocio/Listar.js")
    <script type="text/javascript">
        var URL_CAMBIO_UNIDAD_NEGOCIO = "@Url.Action("ListarOpcionesAnios", "PlanNegocio", new { Area = "Gestion"})";

        var URL_CONSULTAR_PLAN_NEGOCIO = "@Url.Action("ConsultarPlanNegocio", "PlanNegocio", new { Area = "Gestion"})";

        var URL_LISTAR_PLAN_NEGOCIO = "@Url.Action("Listar", "PlanNegocio", new { Area = "Gestion", empresaId = Model.EmpresaId})";

        var URL_EDITAR_PLAN = "@Url.Action("Editar", "PlanNegocio", new { Area = "Gestion"})";

      

        listarPlan.init();
    </script>

}
